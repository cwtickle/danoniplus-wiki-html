# オブジェクトリファレンス

## 主要オブジェクト
- [g_rootObj](obj-v0001-g_rootObj.html) 
- [**g_headerObj**](obj-v0002-g_headerObj.html)  
- [**g_keyObj**](obj-v0003-g_keyObj.html)  
- [**g_stateObj**](obj-v0004-g_stateObj.html)  
- [g_scoreObj](obj-v0005-g_scoreObj.html)  
- [g_loadObj](obj-v0006-g_loadObj.html)  
- [g_gaugeOptionObj](obj-v0007-g_gaugeOptionObj.html)  
- [g_detailObj](obj-v0008-g_detailObj.html)  
- [g_wordObj](obj-v0009-g_wordObj.html)  
- [**g_attrObj**](obj-v0010-g_attrObj.html) 
- [g_resultObj](obj-v0011-g_resultObj.html) 
- [g_resultMsgObj](obj-v0012-g_resultMsgObj.html)  - v19.5.2以降廃止
- [g_rankObj](obj-v0013-g_rankObj.html) 
- [g_hidSudObj](obj-v0014-g_hidSudObj.html) 
- [**g_lblNameObj / g_local_lblNameObj**](obj-v0015-g_lblNameObj.html) 
- [**g_msgObj / g_local_msgObj**](obj-v0016-g_msgObj.html) 
- [g_msgInfoObj](obj-v0024-g_msgInfoObj.html) 
- [g_errMsgObj](obj-v0026-g_errMsgObj.html) 
- [**g_btnAddFunc** / **g_cxtAddFunc**](obj-v0018-g_btnAddFunc.html) 
- [**g_btnDeleteFlg** / **g_cxtDeleteFlg**](obj-v0019-g_btnDeleteFlg.html) 
- [**g_shortcutObj**](obj-v0017-g_shortcutObj.html) 
- [**g_btnWaitFrame**](obj-v0020-g_btnWaitFrame.html) 
- [g_btnPatterns](obj-v0021-g_btnPatterns.html) 
- [g_scViewObj](obj-v0022-g_scViewObj.html) 
- [g_escapeStr](obj-v0023-g_escapeStr.html) 
- [g_settings](obj-v0025-g_settings.html) 
- g_posObj
- g_diffObj
- g_imgObj 
- g_cssObj
- g_workObj

## 画面定義関数
1. [タイトル前処理](dsp-m0001-initialControl.html)
    - initialControl ()
    - getScoreDetailData (_scoreId)
    - storeBaseData (_scoreId, _scoreObj, _keyCtrlPtn)
    - initAfterDosLoaded ()
      - initAfterCssLoaded ()
    - loadSettingJs ()
    - loadCustomJs (_afterFunc)
2. タイトル表示
    - titleInit ()
    - flowTitleTimeline ()
3. 設定画面表示
    - optionInit ()
4. 設定画面（Display）表示
    - settingsDisplayInit ()
5. キーコンフィグ画面表示
    - keyConfigInit ()
      - getKeyConfigColor (_j, _colorPos)
      - searchPattern (_tempPtn, _sign, _transKeyUse, _keyCheck)
6. [プレイ開始前設定](dsp-m0006-loadingScoreInit.html)
    - loadMusic ()
    - setAudio (_url)
    - initWebAudioAPIfromBase64 (_url)
    - initWebAudioAPIfromURL (_url)
    - musicAfterLoaded ()
    - loadingScoreInit ()
       - setData (_data, _minLength)
7. プレイ画面表示
    - mainInit ()
      - mainKeyDownActFunc[_autoAllFlg] (_keyCode)
      - mainKeyUpActFunc[_autoAllFlg] ()
      - changeColorFunc[_arrow] (_j, _k)
      - changeColorFunc[_frz] (_j, _k, _state)
      - judgeObjDelete[_arrow] (_j, _deleteObj)
      - judgeMotionFunc[_arrow] (_j, _arrow, _cnt)
      - judgeMotionFunc[_frz] (_j, _k, _frzRoot, _cnt)
      - judgeMotionFunc[_frzKeyUp] (_j, _k, _frzRoot, _cnt, _keyUpFrame)
      - judgeNextFunc[_frz] (_j, _k, _cnt)
      - checkKeyUpFunc[_frz] (_j)
      - **makeArrow** (_j, _arrowCnt, _name, _color)
      - **movArrow** (_j, _k, _name)
      - **makeFrzArrow** (_j, _arrowCnt, _name, _normalColor, _barColor)
      - **movFrzArrow** (_j, _k, _name)
    - flowTimeline ()
8. 結果画面表示
    - resultInit ()
      - withOptions (_flg, _defaultSet, _displayText)
    - flowResultTimeline ()

## 画面定義関数（補助）
- [**loadDos** (_afterFunc, _scoreId, _cyclicFlg)](fnc-c0011-loadDos.html) 
- **reloadDos** (_scoreId)
- copySetColor(_baseObj, _scoreId)
- [makeWarningWindow (_text, _resetFlg)](fnc-c0013-makeWarningWindow.html) 
- [makeInfoWindow (_text, _animationName)](fnc-c0012-makeInfoWindow.html) 
  - setWindowStyle (_text, _bkColor, _textColor, _align)
- [**setShortcutEvent** (_displayName, _func, _displayFlg)](fnc-c0035-setShortcutEvent.html) 
  - [createScTextCommon (_displayName)](fnc-c0034-createScTextCommon.html) 
    - [**createScText** (_obj, _settingLabel, { displayName, dfLabel, targetLabel, x })](fnc-c0008-createScText.html) 
  - [**commonKeyDown** (_evt, _displayName, _func)](fnc-c0007-commonKeyDown.html) 
  - **commonKeyUp** (_evt)

## 主要関数
### 汎用
- [**multiAppend** (_baseObj, ...rest)](fnc-c0042-multiAppend.html) 
- setAttrs (_baseObj, { ...rest })
- getNumAttr (_baseObj, _attrkey)
- [**hasVal** (_data)](fnc-c0017-hasVal.html) 
- [**listMatching** (_str, _list, { prefix, suffix })](fnc-c0006-listMatching.html) 
- [**fuzzyListMatching** (_str, _headerList, _footerList)](fnc-c0039-fuzzyListMatching.html) 
- [**checkLightOrDark** (_colorStr)](fnc-c0041-checkLightOrDark.html) 
- **copyArray2d** (_array2d)
- **sumData** (_array)
- transCode (_setKey)
- blockCode (_setKey)
- [**openLink** (_url)](fnc-c0018-openLink.html) 
- **splitLF** (_str)
- [**setVal** (_checkStr, _default, _type)](fnc-c0001-setVal.html) 
- [**$id** (_id)](fnc-c0014-id.html) 
- [toCapitalize (_str)](fnc-c0015-toCapitalize.html) 
- [roundZero (_num, _init = 0)](fnc-c0016-roundZero.html) 
- [preloadFile (_as, _href, _type, _crossOrigin)](fnc-c0019-preloadFile.html) 
- [importCssFile (_href, _func)](fnc-c0020-importCssFile.html) 
- [getBasicFont (_priorityFont)](fnc-c0029-getBasicFont.html) 
- [**getFontSize** (_str, _maxWidth, _font, _maxFontsize)](fnc-c0009-getFontSize.html) 
    - getStrWidth (_str, _fontsize, _font)
- [copyTextToClipboard (_textVal)](fnc-c0028-copyTextToClipboard.html) 
- createDiv (_id, _x, _y, _width, _height)
- [**createDivCss2Label** (_id, {x, y, w, h, siz, align, ...rest}, ..._classes)](fnc-c0002-createDivCss2Label.html) 
- createImg (_id, _imgPath, _x, _y, _width, _height)
- [**createColorObject2** (_id, {x, y, w, h, rotate, styleName, ...rest}, ..._classes)](fnc-c0003-createColorObject2.html) 
- **createSprite** (_parentObjName, _newObjName, _x, _y, _width, _height, _options) ※v21以降非推奨
- [**createEmptySprite** (_parentObj, _newObjId, {x, y, w, h, title, ...rest}, ..._classes)](fnc-c0043-createEmptySprite.html) 
- createMultipleSprite(_baseName, _num)
- [**deleteChildspriteAll** (_parentObjName)](fnc-c0022-deleteChildspriteAll.html) 
- [**createCss2Button** (_id, _text, _func, {x, y, w, h, siz, align, title, groupName, initDisabledFlg, resetFunc, cxtFunc, ...rest}, ..._classes)](fnc-c0004-createCss2Button.html) 
- [**changeStyle** (_id, {x, y, w, h, siz, align, title, ...rest})](fnc-c0005-changeStyle.html) 
- getTitleDivLabel (_id, _titlename, _x, _y)
- [**clearWindow** (_redrawFlg, _customDisplayName)](fnc-c0021-clearWindow.html) 
  - resetKeyControl ()
  - [drawDefaultBackImage (_key)](fnc-c0024-drawDefaultBackImage.html) 
- [**loadScript** (_url, _callback, _requiredFlg, _charset)](fnc-c0010-loadScript.html) 
- [checkDuplicatedObjects (_obj)](fnc-c0038-checkDuplicatedObjects.html) 
- [**getQueryParamVal** (_name)](fnc-c0025-getQueryParamVal.html) 
- [transFrameToTimer (_frame)](fnc-c0030-transFrameToTimer.html) 
- [transTimerToFrame (_str)](fnc-c0031-transTimerToFrame.html) 
- **calcLevel** (_scoreObj)
- [**getFilePath** (_fileName, _directory)](fnc-c0037-getFilePath.html) 
    - **getFolderAndType** (_path, _pos, _directory)
- [**checkImage** (_str)](fnc-c0026-checkImage.html) 
- [colorToHex (_color)](fnc-c0027-colorToHex.html) 
    - [colorNameToCode (_color)](fnc-c0040-colorNameToCode.html) 
    - byteToHex (_num)
- isColorCd (_str)
- hasAnglePointInfo (_str)
- colorCdPadding (_useFlg, _colorStr)
- [**makeColorGradation** (_colorStr, { _defaultColorgrd, _colorCdPaddingUse, _objType, _shadowFlg })](fnc-c0036-makeColorGradation.html) 
- [**keyIsDown** (_keyCode)](fnc-c0023-keyIsDown.html) 
- replaceStr (_str, _pairs)
- [**escapeHtml** (_str, _escapeList)](fnc-c0032-escapeHtml.html) 
- [**escapeHtmlForEnabledTag** (_str)](fnc-c0032-escapeHtml.html) 
- [**unEscapeHtml** (_str)](fnc-c0033-unEscapeHtml.html) 
- escapeHtmlForArray (_array)

### 共通（汎用的で無いもの）
- **current** ()
- makeSpriteData (_data, _calcFrame)
    - makeSpriteImage (_obj)
    - makeSpriteText (_obj)
- loadLocalStorage ()
- makePlayButton(_func)
- drawSpriteData (_frame, _spriteName, _depthName)
- drawMainSpriteData (_frame, _depthName)
- getSpriteJumpFrame (_frames)
- drawTitleResultMotion (_spriteName)
- changeSetColor()

### タイトル画面
- **dosConvert** (_dos)
- getMusicNameSimple (_musicName)
- getMusicNameMultiLine (_musicName)
- **preheaderConvert** (_dosObj)
- **headerConvert** (_dosObj)
- resetBaseColorList (_baseObj, _dosObj, { scoreId })
  - setColorList (_data, _colorInit, _colorInitLength,  
{ _defaultColorgrd, _colorCdPaddingUse, _defaultFrzColorUse, _objType, _shadowFlg})
- addGaugeFulls (_obj)
- resetCustomGauge (_dosObj, { scoreId })
- getGaugeSetting (_dosObj, _name, _difLength, { scoreId })
  - setGaugeDetails (_scoreId, _gaugeDetails)
  - getGaugeDetailList (_scoreId, _defaultGaugeList)
- **keysConvert** (_dosObj)
  - existParam (_data, _paramName)
  - newKeyMultiParam (_key, _name, _convFunc, { errCd, baseCopyFlg, loopFunc })
  - newKeySingleParam (_key, _name, _type)
  - newKeyPairParam(_key, _name, _pairName, _defaultName, _defaultVal)

### 設定画面
- commonSettingBtn (_labelName)
- **setSpriteList** (_settingList)
- createOptionWindow (_sprite)
  - resetDifWindow ()
  - makeDifList (_difList, _difCover, _targetKey)
  - nextDifficulty (_scrollNum)
  - makeDifBtn (_scrollNum)
  - createDifWindow (_key)
  - createScoreDetail (_name, _graphUseFlg)
  - setScoreDetail ()
  - getScoreBaseData(_scoreId)
  - drawSpeedGraph (_scoreId)
  - drawDensityGraph (_scoreId)
  - drawBaseLine (_context, _resolution)
  - drawLine (_context, _y, _lineType, _fixed)
  - updateScoreDetailLabel(_name, _label, _value, _pos, _labelname)
  - makeDifInfoLabels (_scoreId)
  - makeDifInfo (_scoreId)
  - setReverse (_btn)
  - setReverseView (_btn)
  - setGauge (_scrollNum)
  - gaugeChange (_gaugeNum)
    - setLife (_baseProperty, _setProperty, _magnification)
    - setLifeCategory (_baseObj, { _magInit = 1, _magRcv = 1, _magDmg = 1 }
    - changeLifeMode (_baseObj)
  - gaugeFormat (_mode, _border, _rcv, _dmg, _init, _lifeValFlg)
  - **setDifficulty** (_initFlg)
- **createGeneralSetting** (_obj, _settingName, { unitName, skipTerm, settingLabel, displayName, scLabel })
- createLblSetting (_settingName, _adjY, _settingLabel)
- setSetting (_scrollNum, _settingName, _unitName)
- makeDisabledLabel (_id, _heightPos, _defaultStr)
- **getKeyCtrl** (_localStorage, _extraKeyName)
- makeSettingLblCssButton (_id, _name, _heightPos, _func, { x, y, w, h, siz, cxtFunc, ...rest })
- makeDifLblCssButton (_id, _name, _heightPos, _func, { x, w, btnStyle })
- makeMiniCssButton (_id, _directionFlg, _heightPos, _func, { dx, dy, dw, dh, dsiz })

### 設定画面（Display）
- createSettingsDisplayWindow (_sprite)
  - makeDisplayButton (_name, _heightPos, _widthPos)
    - makeDisabledDisplayLabel (_id, _heightPos, _widthPos, _defaultStr, _flg)
- interlockingButton (_headerObj, _name, _current, _next, _buttonFlg)

### キーコンフィグ画面
- getKeyConfigColor (_j, _colorPos)
- changeKeyConfigColor (_j, _k, _cssName)
- searchNextCursor (_pos)
- setConfigType (_scrollNum)
- setColorType (_scrollNum)
- setKeyConfigCursor ()
- resetCursor (_resetPos, _resetCursorFlg)
- searchPattern (_tempPtn, _sign, _transKeyUse, _keyCheck)
- removeClassList (_j, _k) ※v21.4.0に廃止予定

### ロード画面
- setScoreIdHeader (_scoreId, _scoreLockFlg)
- applyShuffle (_keyNum, _shuffleGroup, _style)
- applyMirror (_keyNum, _shuffleGroup)
- applyRandom (_keyNum, _shuffleGroup)
- applySRandom (_keyNum, _shuffleGroup, _arrowHeader, _frzHeader)
- **scoreConvert** (_dosObj, _scoreId, _preblankFrame, _dummyNo, _keyCtrlPtn, _scoreAnalyzeFlg)
  - calcFrame (_frame)
  - storeArrowData (_data)
  - setSpeedData (_header, _scoreNo, _footer)
  - setColorData (_header, _scoreNo)
  - setCssMotionData (_header, _scoreNo)
  - makeWordData (_scoreNo)
  - makeSpriteWordData (_data, _reverseFlg)
  - makeBackgroundData (_header, _scoreNo)
  - makeBackgroundResultData (_header, _scoreNo, _defaultHeader)
- calcLifeVals (_allArrows)
- calcLifeVal (_val, _allArrows)
- getLastFrame (_dataObj, _keyCtrlPtn)
- getFirstArrowFrame (_dataObj, _keyCtrlPtn)
- getStartFrame (_lastFrame, _fadein, _scoreId)
- **setSpeedOnFrame** (_speedData, _lastFrame)
- **setMotionOnFrame** ()
- **getFirstArrivalFrame** (_startFrame, _speedOnFrame, motionOnFrame)
- **pushArrows** (_dataObj, _speedOnFrame, _motionOnFrame, _firstArrivalFrame)
  - **setNotes** (_j, _k, _data, _startPoint, _header, _frzFlg)
  - **calcNotes** (_j, _data, _header, _frzFlg)
  - **calcColorData** (_header)
  - calcCssMotion (_header)
- **getArrowStartFrame** (_frame, _speedOnFrame, _motionOnFrame)
- isFrzHitColor (_val)
- **getFrzLength** (_speedOnFrame, _startFrame, _endFrame)
- **convertreplaceNums** ()
- **pushColors** (_header, _frame, _val, _colorCd)
- pushCssMotions (_header, _frame, _val, _styleName, _styleNameRev)
- **getArrowSettings** ()
- **setKeyCtrl** (_localStorage, _keyNum, _keyCtrlPtn)

### メイン画面
- **changeAppearanceFilter** (_appearance, _num)
- makeCounterSymbol (_id, _x, _class, _heightPos, _text)
- **changeArrowColors** (_mkColor, _mkColorCd, _allFlg)
- **changeFrzColors** (_mkColor, _mkColorCd, _colorPatterns, _allFlg)
- changeCssMotions (_mkCssMotion, _mkCssMotionName, _name)
- **changeHitFrz** (_j, _k, _name)
- **changeFailedFrz** (_j, _k)
- checkJudgment (_difCnt)
- **judgeArrow** (_j)
- displayDiff (_difFrame, _justFrames)
- countFastSlow (_difFrame, _justFrames)
- changeLifeColor (_state)
- **lifeRecovery** ()
- **lifeDamage** ()
- updateCombo ()
- judgeIi (_difFrame)
- judgeShakin (_difFrame)
- judgeMatari (_difFrame)
- judgeDamage ()
- judgeShobon (_difFrame)
- judgeUwan (_difFrame)
- judgeKita (_difFrame)
- judgeIknai (_difFrame)
- makeFinishView (_text)
- finishViewing ()

### 結果画面
- makeCssResultPlayData (_id, _x, _class, _heightPos, _text, _align)
- makeCssResultSymbol (_id, _x, _class, _heightPos, _text, _align)
