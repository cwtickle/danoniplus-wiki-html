[← 譜面エフェクト仕様に戻る](dos_effect.html)
## 色変化 ( acolor_data, color_data )
### 使い方
```
|color_data=202,20,0xffffff,204,21,0xcccccc,206,23,0xccccff,1283,23,0xaa99ff|

|color_data=
202,20,#ffffff
204,21,#ffcccc:#ffffff@radial-gradient
206,23,45deg:#ccccff:#ccfffff
1283,23,#aa99ff
|
```
3つで1セット。"acolor_data"が画面全体の矢印色変化(全体即時適用)、  
"color_data"が指定フレーム以降の矢印色変化です。  
どちらも名前が異なるだけで、使い方は同じです。  

### 記述仕様
#### 色変化

|番号|論理名|設定例|内容|
|----|----|----|----|
|1|Frame|1436|変更するタイミングのフレーム数を指定します。|
|2|ColorNo|20|矢印やフリーズアローなど、変更する対象オブジェクト（矢印番号）を指定。後述します。|
|3|ColorCode|#aa99ff|カラーコード。0x始まり、#始まりどちらも使用できます。<br>また、[コロン(:)区切りによるグラデーション](dos-c0001-gradation.html)に対応しています。|

#### コメント

|番号|論理名|設定例|内容|
|----|----|----|----|
|1|Frame|200|フレーム数指定。指定は任意です。|
|2|ColorNo|-|ハイフン固定。|
|3|Comment|＜コメント入力＞|コメント文を自由に入力できます。|


### 矢印番号
色変化では、対象を示す矢印番号を指定します。仕様は下記の通りです。  

|矢印番号|論理名|内容|
|----|----|----|
|0～19 or<br>1000～|矢印(個別)|ステップゾーンの左から右、上から下の順に並べたときに何番目の矢印かを指定します。<br>スタートは0からです。<br>矢印を個別に適用する際に使います。<br>キー毎のパターン0が基準です。それ以外のパターンは、ソースの中で自動選定されます。|
|20～24|矢印グループ1～5|setColorで1～5番目に指定した矢印群を指定。|
|30,32,34,36,38|フリーズアローグループ1～5(通常/矢印)|setColorで1～5番目に指定した矢印群を指定。|
|31,33,35,37,39|フリーズアローグループ1～5(通常/帯)|setColorで1～5番目に指定した矢印群を指定。|
|40,42,44,46,48|フリーズアローグループ1～5(ヒット時/矢印)|setColorで1～5番目に指定した矢印群を指定。|
|41,43,45,47,49|フリーズアローグループ1～5(ヒット時/帯)|setColorで1～5番目に指定した矢印群を指定。|
|50～54|フリーズアローグループ1～5(通常/矢印＆帯)|setColorで1～5番目に指定した矢印群を指定。<br>30～39との違いは、矢印と帯の両方を指定できる点が異なります。|
|55～59|フリーズアローグループ1～5(ヒット時/矢印＆帯)|setColorで1～5番目に指定した矢印群を指定。<br>40～49との違いは、矢印と帯の両方を指定できる点が異なります。|
|60|フリーズアロー全て(通常/矢印＆帯)|全てのフリーズアローが対象です。|
|61|フリーズアロー全て(ヒット時/矢印＆帯)|全てのフリーズアローが対象です。|

### Flash版との差異について
矢印番号の採番の違いにより、一部異なる部分があります。  

■矢印

□矢印（個別）  
左から右、上から下の順に0から記載する形式に変わったため、  
7key, 特殊キー(12, 17key)以外は原則、置き換えが必要です。  

□矢印（グループ）  

|対象グループ|Flash版|CW Edition|
----|----|----
|AA|21※|22|
|通常2 / 矢印|22|23|
|通常3 / 矢印|23|24|

※7ikey, 11Wkeyの場合

■フリーズアロー

|対象グループ|Flash版|CW Edition|
----|----|----
|通常時　：通常2 / 矢印|34|36|
|通常時　：通常2 / 帯|35|37|
|通常時　：AA / 矢印|36|34|
|通常時　：AA / 帯|37|35|
|ヒット時：通常2 / 矢印|44|46|
|ヒット時：通常2 / 帯|45|47|
|ヒット時：AA / 矢印|46|44|
|ヒット時：AA / 帯|47|45|
|通常時　：通常2 / 矢印＆帯|52|53|
|通常時　：AA / 矢印＆帯|53|52|
|ヒット時：通常2 / 矢印＆帯|57|58|
|ヒット時：AA / 矢印＆帯|58|57|

### ver7.1.0以降のフリーズアローヒット時の個別色変化タイミング
- 個別色変化（フリーズアローヒット時）を設定する場合、  
ステップゾーン到達時を基準にすれば良くなりました。  
ただし押したタイミングにより、ステップゾーン到達時より手前で  
フリーズアローがヒット中になることがあります。  
実際に設定する場合は、キターの判定領域分だけ値を小さくすることを推奨します。

### 20個以上のキーに対する色変化（単発矢印・個別）について
- 20個以上のキーに対して、単発矢印・個別の色変化を行う場合は矢印番号に1000を足します。

```
|color_data=200,2,#ff9966| <- 単発矢印の3番目の要素の色を変更します。
|color_data=200,1002,#ff9966| <- 単発矢印の3番目の要素の色を変更します。

|color_data=200,22,#ff9966| <- 矢印グループ2（斜め矢印すべて）の色を変更します。
|color_data=200,1022,#ff9966| <- 単発矢印の23番目の要素の色を変更します。
```

### 関連項目
- [displayUse](dos-h0057-displayUse.html)  Display項目の利用有無
- [colorDataType](dos-h0046-colorDataType.html)  色変化の過去互換設定
- [defaultColorgrd](dos-h0061-defaultColorgrd.html)  自動グラデーション設定
- [グラデーション仕様](dos-c0001-gradation.html) 

### 更新履歴

|Version|変更内容|
|----|----|
|[v16.2.1](https://github.com/cwtickle/danoniplus/releases/tag/v16.2.1)|・矢印番号1000以上を定義（20個以上のキー数への対応）|
|[v15.1.0](https://github.com/cwtickle/danoniplus/releases/tag/v15.1.0)|・フレーム数、矢印番号において数式記法に対応|
|[v12.0.0](https://github.com/cwtickle/danoniplus/releases/tag/v12.0.0)|・グラデーション記述に対応|
|[v7.9.0](https://github.com/cwtickle/danoniplus/releases/tag/v7.9.0)|・コメント行を実装|
|[v7.1.0](https://github.com/cwtickle/danoniplus/releases/tag/v7.1.0)|・フリーズアローヒット時の個別色変化のタイミングを変更|
|[v3.10.0](https://github.com/cwtickle/danoniplus/releases/tag/v3.10.0)|・セット毎改行区切りに対応、改行区切り時は行末のカンマを任意に変更|
|[v1.0.0<br>(v0.46.0)](https://github.com/cwtickle/danoniplus/releases/tag/v1.0.1)|初回実装|